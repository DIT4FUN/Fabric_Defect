## 软件概要

### 一、设计理念

本软件以检测、分类速度为主要目标的基础之上进行设计，尽可能适应工厂实际情况，而以非解题需要为目的。

在深度学习框架选择方面，采用国内领先的PaddlePaddle-Fluid开源框架，可以有效防止因政治原因导致国外框架突然终止服务等情况。另一方面国内开源框架有利于提供企业技术支持，目前该深度学习框架有可选硬件设备，可以有效适应工厂环境。

#### 布料类型检测

1.	图像预处理	
2.	裁剪指定张图像，充当数据集
3.	对数据集数据增强
4.	监督学习训练
5.	预测结果

#### 瑕疵检测
1.图像预处理
> - 使用上下采样突出各瑕疵特征。
> - 边缘检测获取瑕疵轮廓。
> - 向下采样获得瑕疵位置。

2.半监督循环扩充数据集
> - 使用自研TorNN半监督辅助分类算法，对第一阶段预测数据进行保守分类。
> - 如果保守分类得到数据较少，则调整TorNN扩充参数，提升分类数据量。直到数据量达到阈值则终止循环。
> -对得到的数据集进行数据增强操作。

3.半监督深度学习训练

> - 使用扩充得到的数据集放入神经网络进行第二阶段训练。

4.对所有数据集进行瑕疵分类

> - 对所有含有瑕疵的图片进行预测分类。

5.在原始图像中标记瑕疵所在位置

> - 利用绘图工具和预测结果，在原始图像中进行标记。

### 二、设计环境
1.程序语言

> 该软件主要程序语言为Python3，深度学习框架为PaddlePaddle-Fluid。如果提供GUI界面则使用C#完成图形化界面设计和调用。

2.程序所需环境配置列表
> - 操作系统：Win10 64x 建议系统版本号大于1703
> - CPU配置：近几年发布的CPU即可，建议英特尔8代处理器，AMD锐龙全系列处理器。
> - ROM配置：如需CPU训练则需要16GB-32GB内存，使用GPU则仅需8GB即可
> - GPU配置：建议英伟达GTX类型10系显卡且显存大于8GB，或Tesla系列显存大于8G显卡
> - CUDA配置：CUDA版本为8代版本，cudnn为7代对应版本
> - Python环境：建议为Python3.7 x64版本
> - opencv：Python3的4.0以上版本即可
> - Fluid ：Python3的PaddlePaddle-gpu V1.4 post-87版本

### 三、当前工程概况

1、布料识别 


> 除调用接口未定方案外，完工。

2、瑕疵检测 


> - 近期可能更换网络结构，并增加接口调用支持。
> - 参数尚未调整最佳位置，需要调整参数。
> - 需要进一步清洗数据集，以提高分类准确度。
> - 模型文件过大，需要调整参数以降低运算成本。

### 四、程序指标

#### 布料类型检测
因为部分原因，暂提供3类布料训练指标

![正确率指标][1]
![训练损失指标][2]
#### 瑕疵检测
单一品种瑕疵检测指标[当前仅支持一种布匹类型的瑕疵检测]
目前瑕疵分类结果如下：
[正常\油污\浆斑\横线的\竖线的\停车痕\糙纬]


![正确率指标][3]
![训练损失指标][4]


  [1]: https://wx1.sinaimg.cn/mw690/df5193a5ly1g3jlsvzbiwj20hs0dc3yn.jpg
  [2]: https://wx2.sinaimg.cn/mw690/df5193a5ly1g3jlswazr0j20hs0dcglq.jpg
  [3]: https://wx3.sinaimg.cn/mw690/df5193a5ly1g3jlsx3ulyj20hs0dcwf7.jpg
  [4]: https://wx3.sinaimg.cn/mw690/df5193a5ly1g3jlsvyvwjj20hs0dct9e.jpg